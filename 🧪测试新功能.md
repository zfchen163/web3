# 🧪 测试新功能指南

## 🚀 快速开始

确保所有服务都在运行：
```bash
# 1. Hardhat 节点（终端 1）
cd contracts && npx hardhat node

# 2. 后端服务（终端 2）
cd backend && go run cmd/api/main.go

# 3. 前端服务（终端 3）
cd frontend && npm run dev
```

然后访问: http://localhost:3000

---

## 测试清单

### ✅ 1. 测试世界地区选择器

**步骤**:
1. 点击顶部导航的 **"📝 注册资产"**
2. 向下滚动到 **"生产地"** 字段
3. 点击下拉框

**测试内容**:
- [ ] 可以看到 "🇨🇳 中国" 选项
- [ ] 选择中国后，可以展开省市区
- [ ] 可以看到其他地区分组（亚洲、欧洲、美洲等）
- [ ] 选择 "🇯🇵 日本"，显示为 "日本"
- [ ] 选择 "🇺🇸 美国"，显示为 "美国"
- [ ] 搜索功能正常（输入 "法国" 可以找到）

**预期结果**:
- ✅ 支持 60+ 个国家
- ✅ 中国有完整的省市区数据
- ✅ 其他国家直接显示国家名

---

### ✅ 2. 测试美化的价格输入弹窗

**步骤**:
1. 先注册一个资产（如果还没有）
2. 切换到 **"📦 我的资产"** 标签
3. 找到一个未上架的资产
4. 点击 **"上架"** 按钮

**测试内容**:
- [ ] 弹出美化的模态框（不是浏览器原生 prompt）
- [ ] 模态框有渐变色边框
- [ ] 标题显示 "💰 设置上架价格"
- [ ] 输入框有焦点（自动聚焦）
- [ ] 输入 "50" 并点击确认
- [ ] 按 Esc 键可以关闭
- [ ] 点击遮罩层可以关闭
- [ ] 按 Enter 键可以确认

**预期结果**:
- ✅ 美观的现代化设计
- ✅ 流畅的动画效果
- ✅ 支持键盘操作
- ✅ 响应式设计

---

### ✅ 3. 测试转移功能的下拉选择

**步骤**:
1. 在 **"📦 我的资产"** 中
2. 点击某个资产的 **"转移"** 按钮

**测试内容**:
- [ ] 弹出美化的模态框
- [ ] 标题显示 "🔄 转移资产"
- [ ] 看到下拉选择框（不是输入框）
- [ ] 下拉列表显示 10 个测试账户
- [ ] 每个账户显示格式：`账户 #0 (0xf39F...2266) - 10000 ETH`
- [ ] 选择一个账户
- [ ] 点击确认，MetaMask 弹出
- [ ] 确认交易

**预期结果**:
- ✅ 不需要手动输入地址
- ✅ 从预设列表中选择
- ✅ 减少输入错误
- ✅ 转移成功

---

### ✅ 4. 测试智能排序

**步骤**:
1. 注册 3-5 个资产
2. 将其中 2 个上架
3. 观察列表顺序

**测试内容**:
- [ ] **我的资产** 页面：已上架的在最前面
- [ ] **市场** 页面：最近上架的在最前面
- [ ] 下架一个资产，它移到后面
- [ ] 重新上架，它又回到前面
- [ ] 转移一个资产，列表更新

**预期结果**:
- ✅ 已上架优先显示
- ✅ 最近操作的在前面
- ✅ 列表自动更新

---

### ✅ 5. 测试表单重置

**步骤**:
1. 进入 **"📝 注册资产"**
2. 填写一些字段：
   - 资产名称: "测试商品"
   - 品牌: "Nike"
   - 分类: "shoes"
   - 生产地: 选择 "中国 > 广东省 > 深圳市"
3. 上传一张图片
4. 点击 **"🔄 重置表单"** 按钮

**测试内容**:
- [ ] 所有文本字段被清空
- [ ] 下拉选择恢复默认
- [ ] 上传的图片被移除
- [ ] 错误提示消失
- [ ] 进度条重置
- [ ] 交易状态清除

**预期结果**:
- ✅ 表单完全恢复初始状态
- ✅ 可以重新开始填写

---

### ✅ 6. 验证状态显示

**步骤**:
1. 注册一个资产
2. 在资产卡片上查看验证状态

**测试内容**:
- [ ] 显示 "🔵 未验证" 标签
- [ ] 标签颜色为灰色
- [ ] 鼠标悬停可以看到提示

**了解更多**:
- 查看 `验证状态说明.md` 文档
- 了解四种验证状态的含义
- 了解如何改变验证状态

---

## 🎯 完整流程测试

### 场景：注册并上架一个来自日本的商品

1. **注册资产**
   - 资产名称: "Sony PlayStation 5"
   - 品牌: "Sony"
   - 分类: "electronics"
   - 生产地: 选择 "亚洲 > 🇯🇵 日本"
   - 上传产品图片
   - 点击 "注册资产"

2. **等待交易确认**
   - MetaMask 弹出
   - 确认交易
   - 等待区块确认

3. **查看资产**
   - 切换到 "📦 我的资产"
   - 找到刚注册的 PS5
   - 验证状态: 🔵 未验证
   - 上架状态: 📦 未上架

4. **上架资产**
   - 点击 "上架" 按钮
   - 美化的弹窗出现
   - 输入价格: "300"
   - 点击确认
   - MetaMask 确认交易

5. **查看市场**
   - 切换到 "🛒 市场"
   - 找到 PS5（应该在最前面）
   - 状态: 🏷️ 已上架
   - 价格: 300 ETH

6. **转移资产**
   - 回到 "📦 我的资产"
   - 点击 "转移" 按钮
   - 从下拉列表选择 "账户 #1"
   - 确认交易

7. **验证转移**
   - 切换 MetaMask 到账户 #1
   - 刷新页面
   - 在 "📦 我的资产" 中应该能看到 PS5

---

## 🐛 常见问题

### Q: 弹窗没有出现？
A: 检查浏览器控制台是否有错误，刷新页面重试。

### Q: 下拉列表是空的？
A: 确保 `testAccounts` 数组已正确定义在 `AppV3.tsx` 中。

### Q: 排序没有变化？
A: 确保后端已重启，数据库连接正常。

### Q: 生产地选择器显示异常？
A: 检查 `element-china-area-data` 包是否正确安装。

---

## ✅ 测试完成清单

完成所有测试后，请确认：

- [ ] 世界地区选择器正常工作
- [ ] 美化弹窗显示正确
- [ ] 转移下拉选择可用
- [ ] 列表排序符合预期
- [ ] 表单重置完整
- [ ] 验证状态显示正确
- [ ] 完整流程无错误

---

## 🎉 测试通过！

如果所有测试都通过，恭喜！新功能已成功集成。

现在您可以：
- 🌍 注册来自世界各地的商品
- 💎 享受美观的用户界面
- 🔄 轻松管理资产
- 📊 快速找到重要信息

有任何问题，请查看相关文档或提出 issue。

祝您使用愉快！✨
